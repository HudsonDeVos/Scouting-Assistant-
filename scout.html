<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scouting Assistant</title>
    <link rel="stylesheet" href="scout.css">
</head>
<body>
    <header>
        <h1>Scout A Team</h1>
        <nav>
            <ul>
                <li><a href="menu.html">Home</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section id="team-info">
            <h2>Team Information</h2>
            <label for="team">Team Number:</label>
            <input type="text" id="team-number" name="team-number">
            <label for="team">Team Name:</label>
            <input type="text" id="team-name" name="team-name">
        </section>
        
        <section id="auto">
            <h2>Auto Score</h2>
            <label for="auto-score">Team Stated Autonomus Score:</label>
            <input type="number" id="auto-score" name="auto-score">
        </section>

        <section id="teleop">
            <h2>Teleop Score</h2>
            <label for="teleop-score">Team Stated TeleOp Score:</label>
            <input type="number" id="teleop-score" name="teleop-score">
        </section>

        <section id="parking">
            <h2>Does Team Park</h2>
            <label>
                Yes
                <input type="radio" name="parking" value="yes">
            </label>
            <label>
                No
                <input type="radio" name="parking" value="no">
            </label>
        </section>

        <section id="sorting">
            <h2>Does Team Sort</h2>
            <label>
                Yes
                <input type="radio" name="sorting" value="yes">
            </label>
            <labeCl>
                No
                <input type="radio" name="sorting" value="no">
            </label>
            
            <section id="real-auto-score-section">
                <h2>Real Auto Score</h2>
                <label>Score:</label>
                <input type="number" id="real-auto-score" name="real-auto-score">
            </section>

            <section id="real-teleop-score-section">
                <h2>Real Teleop Score</h2>
                <label>Score:</label>
                <input type="number" id="real-teleop-score" name="real-teleop-score">
            </section>
            
            <section id="personal-teamwork-ranking">
                <h2>Did You Work With This Team Well</h2>
                <label>
                    1
                    <input type="radio" name="personal-teamwork-ranking" value="1">
                </label>
                <label>
                    2
                    <input type="radio" name="personal-teamwork-ranking" value="2">
                </label>
                <label>
                    3
                    <input type="radio" name="personal-teamwork-ranking" value="3">
                </label>
                <label>
                    4
                    <input type="radio" name="personal-teamwork-ranking" value="4">
                </label>
                <label>
                    5
                    <input type="radio" name="personal-teamwork-ranking" value="5">
                </label>
            </section>
            
            <button id="save-team">Save Team</button>

            <script>
                // Check if we are editing an existing team
                const editIndex = localStorage.getItem("editIndex");

                if (editIndex !== null) {
                    const teams = JSON.parse(localStorage.getItem("scoutedTeams")) || [];
                    const team = teams[editIndex];

                    // Fill the form with existing data
                    document.getElementById("team-number").value = team.teamNumber;
                    document.getElementById("team-name").value = team.teamName;
                    document.getElementById("auto-score").value = team.autoScore;
                    document.getElementById("teleop-score").value = team.teleopScore;

                    document.querySelector(`input[name="parking"][value="${team.parking}"]`)?.click();
                    document.querySelector(`input[name="sorting"][value="${team.sorting}"]`)?.click();

                    document.getElementById("real-auto-score").value = team.realAutoScore;
                    document.getElementById("real-teleop-score").value = team.realTeleopScore;

                    document.querySelector(
                        `input[name="personal-teamwork-ranking"][value="${team.teamworkRanking}"]`
                    )?.click();
                }

                document.getElementById("save-team").addEventListener("click", function () {
                    const teamData = {
                        teamNumber: document.getElementById("team-number").value,
                        teamName: document.getElementById("team-name").value,
                        autoScore: document.getElementById("auto-score").value,
                        teleopScore: document.getElementById("teleop-score").value,
                        parking: document.querySelector('input[name="parking"]:checked')?.value || "",
                        sorting: document.querySelector('input[name="sorting"]:checked')?.value || "",
                        realAutoScore: document.getElementById("real-auto-score").value,
                        realTeleopScore: document.getElementById("real-teleop-score").value,
                        teamworkRanking: document.querySelector('input[name="personal-teamwork-ranking"]:checked')?.value || ""
                    };

                    let savedTeams = JSON.parse(localStorage.getItem("scoutedTeams")) || [];

                    if (editIndex !== null) {
                        // Update existing team
                        savedTeams[editIndex] = teamData;
                        localStorage.removeItem("editIndex");
                    } else {
                        // Add new team
                        savedTeams.push(teamData);
                    }

                    localStorage.setItem("scoutedTeams", JSON.stringify(savedTeams));

                    alert("Team saved!");
                });
            </script>

        </main>
    </body>